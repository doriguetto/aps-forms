---
description: Conventions for defining Helix block items using core/franklin/components/block/v1/block/item (Card example).
globs: blocks/cards/_cards.json
alwaysApply: false
---

- **Item definition (`core/franklin/components/block/v1/block/item`)**
  - Define each block item in a `definitions[]` entry with:
    - `title`: Human‑readable, typically **singular** (e.g., `"Card"`).
    - `id`: Lowercase singular identifier for the item type (e.g., `"card"`).
    - `plugins.xwalk.page.resourceType`: Always `"core/franklin/components/block/v1/block/item"` for item definitions.
  - `plugins.xwalk.page.template` for items:
    - `name`: Matches the `title` (e.g., `"Card"`).
    - `model`: References a `models[]` entry by `id` that describes the item’s fields (e.g., `"card"`).
  - Example from `blocks/cards/_cards.json`:

  ```json
  {
    "title": "Card",
    "id": "card",
    "plugins": {
      "xwalk": {
        "page": {
          "resourceType": "core/franklin/components/block/v1/block/item",
          "template": {
            "name": "Card",
            "model": "card"
          }
        }
      }
    }
  }
  ```

- **Model configuration for items (`models[]`)**
  - Each item definition must have a corresponding `models[]` entry:
    - `id`: Matches the item `id` (e.g., `"card"`).
    - `fields`: Array of field descriptors ordered as they appear in the authoring UI/runtime (see [model-definition.mdc](mdc:.cursor/rules/eds/model-definition.mdc) for full field configuration options and validation rules).
  - Field conventions (Card example):
    - **Image field**:
      - `component`: `"reference"` (indicates a reference to another asset, e.g., an image).
      - `valueType`: `"string"` (identifier/URL reference).
      - `name`: Lower‑camel case (e.g., `"image"`).
      - `label`: Human‑readable label (e.g., `"Image"`).
      - `multi`: `false` for a single image.
    - **Text field**:
      - `component`: `"richtext"` for formatted text content.
      - `valueType`: `"string"`.
      - `name`: Lower‑camel case (e.g., `"text"`).
      - `label`: Human‑readable (e.g., `"Text"`).
      - `value`: Default value, typically `""` for empty rich text.
  - Example Card model:

  ```json
  {
    "id": "card",
    "fields": [
      {
        "component": "reference",
        "valueType": "string",
        "name": "image",
        "label": "Image",
        "multi": false
      },
      {
        "component": "richtext",
        "name": "text",
        "value": "",
        "label": "Text",
        "valueType": "string"
      }
    ]
  }
  ```

- **Filter integration between containers and items**
  - Container filters (see `[block.mdc](mdc:.cursor/rules/eds/block.mdc)`) must reference item `id`s:
    - `filters[].id`: Tied to the container block (e.g., `"cards"`).
    - `filters[].components`: Includes each item `id` that can be placed inside the container (e.g., `"card"`).
  - **DO:**
    - Keep item `id` and model `id` identical so `template.model` can reference them consistently.
    - Ensure any new item type added for a container is also listed in the container’s `filters[].components`.
  - **DON'T:**
    - Reuse the same `id` for different item shapes; change the `id` and create a new `models[]` entry if the fields diverge.
    - Omit the model entry for an item definition—`template.model` must always resolve to a concrete `models[]` configuration.

- **Schema and naming hygiene**
  - **Field naming:**
    - Use lower‑camel case for `name` (e.g., `image`, `text`).
    - Use sentence‑case for `label` (`"Image"`, `"Text"`) to keep authoring UI consistent.
  - **Types and components:**
    - Choose `component` values that map to supported authoring widgets (`"reference"`, `"richtext"`, etc.).
    - Keep `valueType` aligned with what the runtime expects (`"string"` in the Card example).
  - When extending or creating new `block/item` definitions:
    - Mirror the Card pattern—add a `definitions[]` entry, a matching `models[]` entry, and update the relevant container `filters[].components`.
    - Verify that any new fields are reflected in the container’s markup/CSS, especially if the DOM transform (e.g., in `cards.js`) assumes a particular structure.


